<!DOCTYPE html>
<html>
	<head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
			html { height: 100% }
			body { height: 95%; margin: 0; padding: 0 }
	        #map_canvas { height: 95% }
        </style>
        <script type="text/javascript"
			src="https://maps.googleapis.com/maps/api/js?
			key=AIzaSyBAgciq8z1_C5aadB3D08yzrc-1YlTOEQ0&sensor=false">
        </script>
        <script type="text/javascript">
			function initialize() {
				var previousLatLng;
				var mapOptions = {
					center: new google.maps.LatLng(47.667272, 9.171036),
					zoom: 18,
					mapTypeId: google.maps.MapTypeId.HYBRID
				};
				var map = new google.maps.Map(document.getElementById("map_canvas"),
				mapOptions);
				google.maps.event.addListener(map, 'center_changed', function() {
					document.getElementById("lat").value = map.getCenter().lat();
					document.getElementById("long").value = map.getCenter().lng();
				})
				
				google.maps.event.addListener(map, 'click', function(event) {
					var marker = new google.maps.Marker({
						position: event.latLng,
						map: map
					});
					var routePoints = [
						new google.maps.LatLng(event.latLng.lat(), event.latLng.lng()),
						previousLatLng,
					];
					var route = new google.maps.Polyline({
						path: routePoints,
						strokeColor: "#FF0000",
						strokeOpacity: 1.0,
						strokeWeight: 2
					});					
					route.setMap(map);					
					previousLatLng = event.latLng;
				})
				map.mapTypes.set("OSM", new google.maps.ImageMapType({
					getTileUrl: function(coord, zoom) {
						return "http://tile.openstreetmap.org/" + zoom +
						"/" + coord.x + "/" + coord.y + ".png";
					},
					tileSize: new google.maps.Size(256, 256),
					name: "OpenStreetMap",
					maxZoom: 18
				}));
			}
        </script>
    </head>
    <body onload="initialize()">
        <div id="map_canvas" style="width:100%; height:100%"></div>
        <input id="lat" placeholder="latitude"/>
        <input id="long" placeholder="longitude"/>
    </body>
</html>
